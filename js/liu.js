$(function(){function a(){function a(){for(var a=0;o>a;a++)for(var c=0;n>c;c++){var i=a*p,r=c*s;v.graphics.drawRect(1,"#000000",[i,r,p,s],!0,"#fff")}t=[],$(".desMyProjectInput").val("")}var v=new LSprite;addChild(v);for(var d=0;o>d;d++)for(var f=0;n>f;f++){var l=d*p,g=f*s;v.graphics.drawRect(1,"#000000",[l,g,p,s],!0,e);var h=$("<div></div>").css({left:l,top:g,width:p,height:s}).data({x:l,y:g});h.appendTo(r)}r.appendTo(i),c.on("click",".circleList>li",function(){var a=$(this).css("color");e=a}),c.on("click",".floatDiv>div",function(){var a=$(this),c=a.data("x"),i=a.data("y");v.graphics.drawRect(1,"#000000",[c,i,p,s],!0,e),t.push({x:c,y:i})}),$("#goBack").on("click",function(){var a=t.pop();return a?void v.graphics.drawRect(1,"#000000",[a.x,a.y,p,s],!0,"#fff"):!1}),$("#reset").on("click",a),$("#createImg").on("click",function(){var a=$(".desMyProjectInput").val();if(!a)return alert("请填写描述"),!1;var t=$("#canvas_canvas").get(0).toDataURL("image/jpeg");$('<img src="'+t+'" alt=""/>').appendTo("#creatImgWrap"),$(".page-pintu").hide(),$(".page-create").show(),$("#creatDes strong").text(a),$("#createImg").click(function(){toShow(".page-create")})}),$(".wall-again").click(function(){a(),setTimeout(function(){toShow(".page-pintu")},0)})}var t=[],c=$("body"),i=$("#canvasWrap"),r=$('<div class="floatDiv"></div>'),e="rgb(255, 255, 255)",o=14,n=17,p=parseFloat(i.width()/o),s=parseFloat(i.height()/n);init(1,"canvas",i.width(),i.height(),a)});